
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Balint Erdi's blog about Ember.js</title>
  <meta name="author" content="Balint Erdi">

  
  <meta name="description" content="Ember.js screencasts, articles, best practice tips and more. Check out my blog and stay up-to-date on Ember.js">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://balinterdi.com/blog/page/3/index.html">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/balinterdi" rel="alternate" title="Balint Erdi's blog about Ember.js" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<script src="//load.sumome.com/" data-sumo-site-id="2f7f42a353353cbb47533e4a22a64e9c3ec9211f92d2320ff1130ad6c622ee03" async></script>

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-12299794-2', 'balinterdi.com');
    ga('send', 'pageview');
  </script>


</head>

<body   >
  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NNRW2Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NNRW2Q');</script>
<!-- End Google Tag Manager -->

  <header role="banner"><hgroup>
  <h1><a href="/">I'm all about Ember.js recently</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/balinterdi" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:balinterdi.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2015/08/29/how-to-do-a-select-dropdown-in-ember-20.html">How to Do a Select (Dropdown) in Ember 2.0?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-08-29T17:43:00+02:00" pubdate data-updated="true">Aug 29<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><iframe
  width="178" height="24" style="border:0px"
  src="https://mixonic.github.io/ember-community-versions/2015/08/29/how-to-do-a-select-dropdown-in-ember-2-0.html">
</iframe>


<p>When the select view was about to be removed from Ember, a lot of people
-myself included- wondered how it was going to be replaced. My bet was on a
&#8216;select component&#8217;, after all, views should be transformed into components, right?</p>

<p>Then I saw <a href="https://gist.github.com/ef4/8367f996eb7b57d1f7a5">this gist</a> from Edward Faulkner:</p>

<div>
  <pre><code class='html'>&lt;select onchange={{action (mut vehicle) value=&quot;target.value&quot;}}&gt;
  {{#each vehicles as |vehicleChoice|}}
    &lt;option value={{vehicleChoice}} selected={{eq vehicle vehicleChoice}}&gt;{{vehicleChoice}}&lt;/option&gt;
  {{/each}}
&lt;/select&gt;</code></pre>
</div>


<p>I did not understand half of it, so I dug down to see how the pieces come
together. In this short post, I want to explain what I have found out.</p>

<h3>Solve a simpler problem</h3>

<p>A great mathematician, George Polya, wrote a book in 1945 called <a href="http://smile.amazon.com/How-Solve-It-Mathematical-Princeton/dp/069111966X/ref=smi_www_rco2_go_smi_g2147660602?_encoding=UTF8&amp;*Version*=1&amp;*entries*=0&amp;ie=UTF8">&#8220;How to Solve It&#8221;</a>,
in which he puts down a framework for solving mathematical problems. One
(probably more) of his recommendations can be applied to software development,
too: Solve a simpler problem.</p>

<p>Heeding this advice, we&#8217;ll first tackle a more mundane problem and in the
second round, we&#8217;ll solve the original riddle.</p>

<p>Let&#8217;s assume Edward had written the following:</p>

<div>
  <pre><code class='html'>&lt;select onchange={{action &quot;selectVehicle&quot; value=&quot;target.value&quot;}}&gt;
  {{#each vehicles as |vehicleChoice|}}
    &lt;option value={{vehicleChoice}} selected={{eq vehicle vehicleChoice}}&gt;{{vehicleChoice}}&lt;/option&gt;
  {{/each}}
&lt;/select&gt;</code></pre>
</div>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">import</span> <span class="nx">Ember</span> <span class="nx">from</span> <span class="s1">&#39;ember&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">export</span> <span class="k">default</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">vehicle</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">vehicles</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="nb">String</span><span class="p">.</span><span class="nx">w</span><span class="p">(</span><span class="s1">&#39;Tesla Chrysler Toyota&#39;</span><span class="p">),</span>
</span><span class='line'>  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">selectVehicle</span><span class="p">(</span><span class="nx">vehicle</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;vehicle&#39;</span><span class="p">,</span> <span class="nx">vehicle</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is easier (as in: more familiar) but there are still a few things that
might need explanation. First, before 1.13.3, event listeners on browser
events could not trigger Ember actions like that:</p>

<div>
  <pre><code class='html'>&lt;select onchange={{action &quot;selectVehicle&quot; value=&quot;target.value&quot;}}&gt;</code></pre>
</div>


<p>What this does, is that when the selected value of the dropdown changes, it
fires the onchange listener we added on the <code>&lt;select&gt;</code> which results in calling
our action handler, <code>selectVehicle</code>. The handler just updates the <code>vehicle</code>
property of the controller. This will mark as selected the dropdown option the
user picked due to the <code>selected={{eq vehicle vehicleChoice}}</code> term.</p>

<p>(<code>eq</code> comes from a great little Ember addon called <a href="https://github.com/jmurphyau/ember-truth-helpers">ember-truth-helpers</a>. It
returns true if the two parameters are equal).</p>

<p>Since there is no two-way binding set up between the selected option of the
dropdown and the controller property (<code>vehicle</code>), this needs to be done using a
DOM event listener (<code>onchange</code>) and updating in the action handler. That&#8217;s
exactly what happens in the <code>selectVehicle</code> action handler.</p>

<p>So far so good, let&#8217;s move on.</p>

<h3>Solve the original one</h3>

<p>Wait a minute. How did <code>selectVehicle</code> receive the selected vehicle choice (e.g
Toyota) when the <code>{{action}}</code> helper did not specify any parameters?</p>

<p>When the browser calls an event listener, it passes it an event object which
would become the first parameter of <code>selectVehicle</code>. However, <code>selectVehicle</code>
does not receive the event but the actual value of the selected option, how does
that come about? The missing link is a lesser-known option of the <code>action</code>
helper, <code>value</code>. The property passed to it is read off of the first parameter of
the handler and then replaces it. In our example, <code>target.value</code> is looked up on
the event object, which is exactly the value of the select option that triggered
the <code>onchange</code> event.</p>

<p>Ok, only one thing left.</p>

<p>The original example had this line:</p>

<div>
  <pre><code class='html'>&lt;select onchange={{action (mut vehicle) value=&quot;target.value&quot;}}&gt;</code></pre>
</div>


<p>instead of the more familiar:</p>

<div>
  <pre><code class='html'>&lt;select onchange={{action &quot;selectVehicle&quot; value=&quot;target.value&quot;}}&gt;</code></pre>
</div>


<p>What mut does here is that it allows updating the passed property, so when the
action is called, <code>vehicle</code> is set to the passed value, the value of the
selected option. That is it, we solved the riddle.</p>

<p>The same implementation pattern can be used to update the properties related to
checkboxes, input fields and radio buttons. This new way of doing things takes a
while to get used to, but we&#8217;ll see more and more of it with one-way bindings
becoming best practice.</p>

<p>(By the way, my PR to add a section about <a href="https://github.com/emberjs/guides/pull/670">the actions helper&#8217;s <code>value</code> option</a> to
the guides was merged yesterday, so hopefully more people will know about it.)</p>

<h3>Wait, there is more!</h3>

<p>This post received a lot of comments, some of which are inquiring about more
complex use cases. I decided to do a screencast where I implement some of
these. You can get it by signing up below:</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2015/08/07/rock-and-roll-with-ember-dot-js-v1-dot-13-dot-7-is-out.html">Rock and Roll With Ember.js v1.13.7 Is Out</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-08-07T11:38:00+02:00" pubdate data-updated="true">Aug 7<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am happy to announce another update to the Rock and Roll with Ember.js book,
in line with the latest Ember CLI, 1.13.7. Book customers have already received
the updated version, here is how it got better:</p>

<ul>
<li><strong>Update to Ember CLI 1.13.7</strong></li>
<li><strong>Upgrade to Ember version 1.13.6</strong></li>
<li>Explain better the difference between sync and async test helpers and how
these latter work in Ember</li>
<li>Make the stubs for creating bands and songs not take an id, to be similar to
how the actual API works</li>
<li>Update section about Ember Data being in beta</li>
<li>Show what the custom <code>submit</code> async helper does when it first appears</li>
<li>Remove unit tests for components as <code>ember generate component-test</code> now
generates integration-style tests</li>
<li>Extract the <code>wait</code> helper used across two examples (for showing loading
routes/templates)</li>
<li>Update jsbin in the Templates chapter to use the latest Ember version</li>
<li>Fix importing the capitalizeHelper in the code snippet in the book</li>
<li><p>Last but not least, the pdf version of the book now has page numbers and a
nice, expandable table of contents so you can jump to any chapter or section
from anywhere:</p>

<p><img src="/images/posts/rarwe-1-13-7/preview-toc.png" alt="Collapsable TOC and page numbers" /></p>

<p>I know, it seems extremely simple to have them from the start but the way the
pdf was generated did not allow for this so we had to find another way. I
again worked with <a href="http://murtra.net/">Almudena Garcia</a> on these design
changes and I whole-heartedly recommend her if you have some front-end (HTML &amp;
CSS) tasks to get done.</p></li>
</ul>


<p>There are a couple of other, smaller changes and you can see the whole list in
<a href="https://github.com/balinterdi/rarwe-issues/issues?q=is%3Aissue+milestone%3A1.13.7+is%3Aclosed">the issues repo</a>. Or you can buy the book <a href="http://rockandrollwithemberjs.com">here</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2015/07/17/rock-and-roll-with-ember-dot-js-v1-dot-13-3-is-out.html">Rock and Roll With Ember.js v1.13.3 Is Out</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-07-17T10:47:00+02:00" pubdate data-updated="true">Jul 17<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&#8217;s Friday and if it&#8217;s (every 2nd-6th) Friday, it&#8217;s Rock and Roll release day!</p>

<p>Book version 1.13.3 is rolling out as we speak (ok, we don&#8217;t speak and you
probably read this later, but you get the point) which contains the following
changes:</p>

<ul>
<li><strong>Upgrade to Ember version 1.13.3 (the book is in lockstep, too!)</strong></li>
<li><strong>Update to Ember CLI 1.13.1</strong></li>
<li><p><strong>Extended the Components chapter with closure actions.</strong></p>

<p><a href="http://emberjs.com/blog/2015/06/12/ember-1-13-0-released.html#toc_closure-actions">Closure actions</a> are an awesome new way to fire/handle actions introduced
in 1.13 and so it has to be in the book!</p></li>
<li><p><strong>Extended the Testing chapter with component integration tests.</strong></p>

<p>Integration tests make component tests super simple to set up and so much more
descriptive than unit tests. Our beloved star-rating component is now tested
by the shiny new integration tests.</p></li>
<li><p><strong>Get rid of <code>needs</code> in the controller.</strong></p>

<p>There was one instance where I used this to get a nice placeholder text. As a
preparation for Ember 2.0 where <code>needs</code> is going the way of the dodo, I
removed that nasty <code>needs</code>.</p></li>
<li><p><strong>Specify the band-songs relationship as sync.</strong></p>

<p>Starting from 2.0, Ember Data relationships are assumed to be asynchronous
unless otherwise specified. In the Rock &amp; Roll application, we sideload the
songs with the bands, so adding a <code>{ async: false }</code> option to the
relationship was in order.</p></li>
<li><strong>A few CSS fixes, one of them thanks to <a href="https://twitter.com/lonekorean">lonekorean</a></strong></li>
</ul>


<p>The whole change list is observable <a href="https://github.com/balinterdi/rarwe-issues/issues?q=milestone%3A1.13.3+is%3Aclosed">here</a>.</p>

<p>Hoist the sails, Ember 2.0 (and with it, Rock and Roll with Ember 2.0) is on the horizon!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2015/07/03/rock-and-roll-with-ember-dot-js-v1-dot-13-is-out.html">Rock and Roll With Ember.js v1.13 Is Out</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-07-03T15:25:00+02:00" pubdate data-updated="true">Jul 3<span>rd</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today marks the sixth release of my book, <a href="http://rockandrollwithemberjs.com">Rock and Roll with Ember.js</a>, and
brings it in sync with Ember 1.13. The book follows along the development from
scratch of an Ember application, and chapter by chapter and explains concepts in
the process.</p>

<p>As I have promised, the book is kept up-to-date with the latest stable Ember
version. That implies both using idiomatic Ember and not using deprecated
syntaxes or APIs.</p>

<p>Now that the versioning of Ember Data is in lockstep with that of Ember, I
considered it important to update to the latest Ember Data, too, and will
strive to do so in future releases, too.</p>

<p>Here are the major things I updated for the 1.13 release:</p>

<ul>
<li>Use <code>this.route</code> instead of <code>this.resource</code> in the router map as the latter is now deprecated.</li>
<li>Use <code>Ember.computed</code> and <code>Ember.on</code> instead of the Function prototype
extensions, <code>property</code> and <code>on</code> as extending the Function prototype is
consired a poor practice.</li>
<li>Update the &#8220;Getting ready for Ember 2.0&#8221; chapter as most things are clear now
for the 2.0 release. As I give particular examples for each deprecation, this
chapter can also serve as an update guide for 1.x Ember applications.</li>
<li>Use the new Ember Data find methods, namely <code>store.findAll</code> and
<code>store.findRecord</code>. Before, both fetching a collection and a single record
used <code>store.find</code>.</li>
</ul>


<p>As usual, there are also smaller improvements and fixes and you can find the
whole list in the errata/issues repository for the book, assigned to <a href="https://github.com/balinterdi/rarwe-issues/issues?q=milestone%3A1.13+is%3Aclosed">the release milestone.</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2015/06/05/common-ember-mistakes.html">Common Ember Mistakes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-06-05T00:27:00+02:00" pubdate data-updated="true">Jun 5<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I wrote an article called <a href="http://www.toptal.com/emberjs/the-8-most-common-ember-js-developer-mistakes">&#8220;The Top 8 Most Common Ember.js Developer
Mistakes&#8221;</a> for Toptal that just went live on their blog. As the name
suggests, it describes the typical pitfalls beginner, and sometimes advanced,
Ember developers make with a mitigation strategy for each of them. I am quite
happy about how it turned out and suggest you <a href="http://www.toptal.com/emberjs/the-8-most-common-ember-js-developer-mistakes">give it a read</a>.</p>

<p>Also, it turned out to have more than 2500 words so I thought it might be
convenient for you to have it as a pdf. It spans 13 pages and you can get it
right here below by providing your email address to send the paper to:</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2015/02/18/rock-and-roll-with-ember-js-is-live.html">My Book, Rock and Roll With Ember.js, Is Now Live!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-02-18T09:51:00+01:00" pubdate data-updated="true">Feb 18<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I started writing my book, Rock &amp; Roll with Ember.js, on July 18, 2014, exactly
7 months ago (More precisely, I prepared some drafts from early chapters most of
which I ended up rewriting before that, but who doesn&#8217;t like a good story?).</p>

<p>Today, I am extremely happy to announce that <a href="http://rockandrollwithemberjs.com">the book is available for purchase</a>!</p>

<h2>Tame the dreaded Ember.js learning curve</h2>

<p>Ember is said to be hard to learn. Developers who are new to the framework hit
a wall and can&#8217;t easily find out how all the pieces fit together.</p>

<p>My own experience tells me that Ember has a small number of core concepts that
you have to grok to be able to tame the learning curve. Once you understand
these key ideas behind the framework&#8217;s design, you will fly over that wall and
see the green meadow filled with flowers and bunnies.</p>

<p>You will build Ember applications with confidence and - if you are like me -
you will love building them.</p>

<h2>Read it and build it!</h2>

<p>My book also has a concept, and a very pragmatic one at that.</p>

<p>In the book, we are building an application, chapter by chapter. As we
progress, we are adding new features to the application, introducing new
Ember concepts that are needed for implementing the feature.</p>

<p>When a list of bands need to be displayed alongside with the songs of the
selected band, we reach for nested routes.  When we need a widget that displays
stars for the songs, we introduce components. When we want to show the user
that loading data from the backend is in progress, we learn about loading
routes.</p>

<h2>Set List</h2>

<p>The book currently has the following chapters:</p>

<ol>
<li>Introduction to Ember.js</li>
<li>Ember CLI</li>
<li>Templates and data bindings</li>
<li>Routing</li>
<li>Nested routes</li>
<li>Actions</li>
<li>Components</li>
<li>Controllers</li>
<li>Advanced routing</li>
<li>Talking to a backend - with Ember Data</li>
<li>Testing</li>
<li>Sorting and searching with query params</li>
<li>Loading and error routes</li>
<li>Helpers</li>
<li>Getting ready for Ember 2.0</li>
</ol>


<p>I say &#8216;currently&#8217; because I will definitely have to change some chapters as
Ember evolves (To give an example, Controllers will probably become Routable components).</p>

<h2>A reference book and a reference application</h2>

<p>Ember moves rapidly towards version 2.0. As each minor version is released, it
brings new syntaxes and deprecates old ones. Even though the Ember Core team
takes extreme care to ensure a smooth upgrade process, it is easy for an
application to lag behind, having a few deprecations here and there and not
using the shiny new tools.</p>

<p>The motto of the Ember 2.0 roadmap is &#8220;Stability without Stagnation&#8221;, that old
syntaxes and practices should vanish gradually, giving ample time for developers
to update their applications. At the same time, Ember should not stagnate, it
should introduce new features.</p>

<p>I adhere to this motto, but, more importantly, my book does, too.</p>

<p>I want the book and the Rock &amp; Roll application to be up-to-date with the latest
stable Ember version and not have any of the deprecations. What that means in
practice is that if you buy one of the packages, you will most likely get book
updates after each 1.x release. And at no extra cost to you until 2.0 ships!</p>

<h2>A bonus deal you will definitely like</h2>

<p>When you <a href="http://rockandrollwithemberjs.com/#stairway-to-heaven">buy one of the packages</a> you also get access to an awesome deal
from <a href="https://divshot.com">Divshot</a>, a company that provides static hosting for your Ember apps.</p>

<p>You get 3 months free of <a href="https://divshot.com/pricing">their Fleet plan</a>, a $150 value.</p>

<h2>The &#8220;New Beginning&#8221; tour</h2>

<p><del>Wait, there is more!</del> To celebrate that the book has finally seen the
light of day, there is a 25% discount <a href="http://rockandrollwithemberjs.com/#pricing">on all packages</a>.</p>

<p>This offer expires on Sunday, February 22, at 23:59 PST, so <a href="http://rockandrollwithemberjs.com">grab yours</a> now!</p>

<h2>Acknowledgements</h2>

<p>I am indebted to all of you who have pushed me through the finish line, either
by praising my screencasts, blog posts and review copies of my book, retweeting
my marketing tweets, giving valuable feedback that made the book better or
simply by pointing out typos in the text.</p>

<p>I would also like to thank you to the Ember Core team whose relentless work
makes Ember better every day. You are putting so much time in, it&#8217;s almost
insane. It&#8217;s kinda obvious but without your contributions, this book would not
exist.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/09/05/reminiscing-about-emberfest-2014.html">Reminiscing About EmberFest 2014</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-09-05T09:55:00+02:00" pubdate data-updated="true">Sep 5<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://emberfest.eu">EmberFest 2014</a> ended a week ago and I already feel nostalgic. It
was a great event with great people and you could feel the excitement about
Ember in the air and in all conversations. It was almost single-handedly
organized by <a href="https://haagen-software.no">Joachim Haagen-Skeie</a> for which he deserves huge kudos.</p>

<p>It was really great to associate real people with twitter avatars and have
fascinating conversations about various topics that included the Ember
Inspector, the difficulties in building a build tool and even Firefox OS.</p>

<h3>The functional paradigm making a headway into Emberland</h3>

<p>One thing that struck me about Ember initially is that it seems to rely heavily
on (shared) state. Some (most?) of that is inevitable given Ember being a
performant framework that runs in the browser and is written in Javascript.
None of these facilitates ditching (or minimizing) state and go with a
functional, stateless approach.</p>

<p>On the other hand, I really came to cherish the <a href="http://www.infoq.com/presentations/Simple-Made-Easy">simplicity</a> of the
functional paradigm and have been gravitating towards languages that allow this
(Clojure was, and still is, <a href="http://balinterdi.com/2013/06/19/the-appeal-of-one-paradigm-languages.html">my favorite</a>). So I added a mental
note about my two favorite things being at such a great distance from each other
and moved on.</p>

<p>One theme of the conference and the hallway talks, however, is how Ember
embraces the functional, immutable approach where it makes sense to. It might
have something to do with my confirmation bias, but let me cite the examples
nevertheless. <a href="https://twitter.com/tchak13">Paul Chavard</a> had a talk on his using immutable data
structures in Ember. <a href="http://www.solitr.com/blog/">Jo Liss</a> revealed how Broccoli uses a
&#8220;rebuild-from-scratch&#8221; approach instead of trying to find out which assets to
rebuild at each modification. Finally, Alex Matchneer, aka. machty, prolific
Ember and router.js contributor had <a href="https://docs.google.com/presentation/d/1afMLTCpRxhJpurQ97VBHCZkLbR1TEsRnd3yyxuSQ5YY/edit#slide=id.p">a presentation on React vs.  Ember</a>
at EmberNYC which you should go read. His <a href="https://docs.google.com/presentation/d/1afMLTCpRxhJpurQ97VBHCZkLbR1TEsRnd3yyxuSQ5YY/edit#slide=id.g380053cce_1786">last slide</a> has a bullet-point
that states: &#8220;Don&#8217;t be surprised if Ember adopts DOM-diffing&#8221;.</p>

<p>It would be an understatement if I said I&#8217;m happy to see the functional world
coming to Ember.</p>

<h3>Promises</h3>

<p>I had a talk at the conference called &#8220;Don&#8217;t call me back - How Ember uses
promises and how you can, too&#8221;. As it usually happens, in doing research for the
talk, I learned a lot not just about promises but about other topics, too. This
time, it was the (in)famous run loop I stumbled across on several
occasions so I am really happy I know a lot more about that beast now. You can
find the slides of my presentation below.</p>

<script async class="speakerdeck-embed" data-slide="10"
data-id="47ee01e011b60132c86e02e2e0c65448" data-ratio="1.33333333333333"
src="//speakerdeck.com/assets/embed.js"></script>


<p>I might even do another talk &#8220;How Ember uses the run loop and how you should
probably not&#8221;, or something to this effect.</p>

<h3>EmberFest 2015</h3>

<p>The greatest thing about EmberFest was its vibe. I saw the tweets coming
in from EmberConf this March and <a href="http://reefpoints.dockyard.com/2014/03/17/emberconf-picks-ups-where-the-rails-community-left-off.html">the post-conf blog posts</a>
about the awesome community and how one could feel the excitement that we are
building apps with a tool that is new and hot now but is probably going to be
the framework of choice for many in a few years. It is definitely a fascinating
world to live in.</p>

<p>I&#8217;ll certainly be there at EmberFest 2015, so hopefully see you there!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/06/26/ember-gotcha-controllers-are-singletons.html">Ember Gotcha: Controllers Are Singletons</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-26T08:25:00+02:00" pubdate data-updated="true">Jun 26<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There is a somewhat subtle bug in the current version of the Rock &amp; Roll with
Ember app. If you start to create a song for an artist that does not have one
and then switch to another one, the song creation process does not need to be
restarted by clicking on the &#8220;Why don&#8217;t you create one?&#8221; link. Also, if you&#8217;ve
already partially inputted the name of the song for the first one, it stays
there for the second artist:</p>

<p><img src="/images/posts/singleton-controllers/start-song-creation-for-radiohead.png" alt="Start creating a song for Radiohead" />
<img src="/images/posts/singleton-controllers/new-song-for-radiohead.png" alt="Input Karma for Radiohead" />
<img src="/images/posts/singleton-controllers/new-song-for-rhcp.png" alt="Observe song title stays for Red Hot Chili Peppers" /></p>

<p>The above behavior was brought to my attention by <a href="https://twitter.com/davidlormor">David</a>
<a href="http://davidlormor.com">Lormor</a>, an astute reader and watcher of my screencasts.</p>

<p>In some circumstances it is desirable for the result of some user interaction to
linger between route transitions but in other cases it is not. I put the
current example firmly in the latter camp and thus consider the above a bug.</p>

<p>Let me explain what causes this behavior and then provide a simple solution to fix it.</p>

<h3>Repeat after me: controllers are singletons</h3>

<p>Controllers in Ember are singletons. Controllers in Ember are singletons.
Controllers in Ember are singletons.</p>

<p>When the user leaves a page and goes to another one, the controller is not
torn down. It lives on, keeping its properties.</p>

<p>This makes total sense for a framework that aims to be a tool for creating
long-lived, rich-client side applications but is something to watch out for
when you develop Ember applications.</p>

<p>If you have a long background in back-end development, like yours truly,
it is especially easy to fall prey to this, as you could see.</p>

<h3>Same controller, different model</h3>

<p>Initially, when the applicaiton is loaded, the <code>songCreationStarted</code> property
of the controller is set to false. When the user clicks the &#8220;create one&#8221; in the
&#8220;Why don&#8217;t you create one?&#8221; blurb, it is set to true and thus the text input
field appears to allow adding a new song.</p>

<p>Now comes the tricky part. If the user then decides to go to a different artist,
she clicks the name of another artist in the sidebar. What happens? A transition
is made from one <code>ArtistSongsRoute</code> to another <code>ArtistSongsRoute</code>. The artist
is going to be different but the same <code>ArtistSongsController</code> is used.</p>

<p>To prove my point, here are two screenshots of the Ember Inspector&#8217;s sidebar.
The first one is before, the second one is after the transition between
<code>/artists/radiohead/songs</code> and <code>/artists/red-hot-chili-peppers/songs</code>:</p>

<p><img src="/images/posts/singleton-controllers/ember-inspector-radiohead-songs.png" alt="Ember Inspector - Radiohead songs" />
<img src="/images/posts/singleton-controllers/ember-inspector-rhcp-songs.png" alt="Ember Inspector - RHCP songs" /></p>

<p>You can see that the controller is the same Ember object but the value of the <code>artist</code> property changes.</p>

<h3>Understanding the problem</h3>

<p>When the transition is made between the two artists, the artist object is
changed and consequently any data bound to the artist (and the <code>artist</code> property
of the <code>ArtistSongs</code> controller) is going to be rerendered but, since the
controller instance is not changed, unrelated data will stay unchanged on
screen.</p>

<p>What happens in the code? If you take a look at the template, you see that the
text input field is shown if <code>canCreateSong</code> is true:</p>

<div>
  <pre><code class='html'>&lt;script type=&quot;text/x-handlebars&quot; data-template-name=&quot;artist/songs&quot;&gt;
  {{#if canCreateSong}}
    &lt;div class=&quot;list-group-item&quot;&gt;
      {{input type=&quot;text&quot; class=&quot;new-artist&quot; placeholder=newSongPlaceholder value=newTitle insert-newline=&quot;createSong&quot; }}
      &lt;button class=&quot;btn btn-primary btn-sm new-song-button&quot; {{action &quot;createSong&quot;}}&gt;Add&lt;/button&gt;
      (...)
    &lt;/div&gt;
  {{/if}}
&lt;/script&gt;</code></pre>
</div>


<p><code>canCreateSong</code> is defined in the controller and is true if either
<code>songCreationStarted</code> is true or if there are already songs. Since
<code>songCreationStarted</code> has just been set to true by the <code>enabledSongCreation</code>
action (and the controller instance is not changed) when the user clicked the
&#8220;create one&#8221; link for the first artist, <code>canCreateSong</code> stays true and the
text field stays visible:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">App</span><span class="p">.</span><span class="nx">ArtistSongsController</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">ArrayController</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>  <span class="p">(...)</span>
</span><span class='line'>  <span class="nx">songCreationStarted</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">canCreateSong</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;songCreationStarted&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}.</span><span class="nx">property</span><span class="p">(</span><span class="s1">&#39;songCreationStarted&#39;</span><span class="p">,</span> <span class="s1">&#39;length&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">enableSongCreation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;songCreationStarted&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="p">(...)</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>A simple fix</h3>

<p>To fix this, the simplest solution is to manually reset the properties that we
do not want to persist.</p>

<p>One solution is to do this in the <code>setupController</code> of the route since that
always gets called when transitioning to a new route:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">App</span><span class="p">.</span><span class="nx">ArtistSongsRoute</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Route</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>  <span class="p">(...)</span>
</span><span class='line'>  <span class="nx">setupController</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">controller</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">_super</span><span class="p">(</span><span class="nx">controller</span><span class="p">,</span> <span class="nx">model</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">controller</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">modelFor</span><span class="p">(</span><span class="s1">&#39;artist&#39;</span><span class="p">));</span>
</span><span class='line'>    <span class="nx">controller</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;newTitle&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">controller</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;songCreationStarted&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="p">(...)</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>And that totally works. However, I prefer placing this &#8220;resetting&#8221; code in the
controller, probably because it is strictly controller-related and also because
I can make the code really telling there:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">App</span><span class="p">.</span><span class="nx">ArtistSongsController</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">ArrayController</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>  <span class="p">(...)</span>
</span><span class='line'>  <span class="nx">songCreationStarted</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">canCreateSong</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;songCreationStarted&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}.</span><span class="nx">property</span><span class="p">(</span><span class="s1">&#39;songCreationStarted&#39;</span><span class="p">,</span> <span class="s1">&#39;length&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">artistDidChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;newTitle&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;songCreationStarted&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}.</span><span class="nx">observes</span><span class="p">(</span><span class="s1">&#39;artist&#39;</span><span class="p">),</span>
</span><span class='line'>  <span class="p">(...)</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <code>observes</code> function property extension will run the <code>artistDidChange</code> code
every time the <code>artist</code> property of the controller changes and that is exactly
when we need to clear the title and allow the song creation process to be
restarted. Nice, clean and does exactly one thing.</p>

<p><em>Note: The latest version of the code that contains these changes is <a href="https://github.com/balinterdi/rock-and-roll/releases/tag/fix-start-song-creation-bug">available on Github</a>.</em></p>

<h3>Model Dependent State - UPDATE</h3>

<p>It turns out I stumbled into something substantial. As <a href="http://localhost:4000/2014/06/26/ember-gotcha-controllers-are-singletons.html#comment-1461013970">Luke Melia points out</a> below in the comments (thank you, Luke!),
the above problem has been under consideration for a while.</p>

<p>Alex Matchneer, a member of the Ember core team gave <a href="http://youtu.be/Syv_OTzHOr0">a presentation at EmberConf</a> in which he explains that there is a missing
primitive.</p>

<p>He calls it &#8220;Model Dependent State&#8221; and it is what would decide under what
conditions a certain controller property is &#8220;sticky&#8221; (whether it retains its
value when you change the model of a certain controller or not).</p>

<p><a href="http://youtu.be/Syv_OTzHOr0?t=14m18s">Here</a> is the part where he begins to talk about Model
Dependent State.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/06/18/indicating-progress-loading-routes-in-ember-dot-js.html">Indicating Progress - Loading Routes in Ember.js</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-18T21:38:00+02:00" pubdate data-updated="true">Jun 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When an Ember app is being loaded at first, the user sees a blank screen. When
transitioning between two routes and loading data to render for the destination
template, there is no indication that something is happening and thus the user can
be perplexed. Ideally, loading data happens fast enough so that users barely
notice the blank screen or freeze, but web apps do not always behave ideally.</p>

<p>If you have read some of my other articles on Ember, you will not be surprised
to hear that there is a splendid solution for this problem and that it is based
on a convention.</p>

<h3>Unresolved promises</h3>

<p>The <code>model</code> hook of routes is the canonical place to fetch data needed
to render the corresponding template. When a promise is returned, execution is
blocked until that promise is resolved (or rejected). That is the period during
which the application seems unresponsive. When starting up the application,
this can even mean that the user only sees a blank screen. Since data is fetched
asyncronously, not even the spinner in the tab title is going to spin.</p>

<p>The user may just close the tab and go on with her life. We can&#8217;t let that
happen and unsurprisingly Ember has a convention-based solution that is easy to
work with and customize.</p>

<h3>Beautiful, reusable conventions</h3>

<p><a href="/2014/02/26/a-common-resource-route-pattern-in-ember-dot-js.html">We saw</a> how each resource route (and thus each route level) creates an
outlet for the level below to render content in. Let&#8217;s take a look at the routes
of the application to see how that plays out:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">App</span><span class="p">.</span><span class="nx">Router</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s1">&#39;artists&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;:slug&#39;</span> <span class="p">},</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>The outlet defined in the (top-level) application template is going to be filled
in by the content rendered by the first-level templates (in this case, <code>artists</code>).</p>

<div>
  <pre><code class='html'>&lt;script type=&quot;text/x-handlebars&quot;&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;div class=&quot;page-header&quot;&gt;
      {{#link-to &quot;index&quot;}}
        &lt;h1&gt;Rock &amp; Roll&lt;small&gt; with Ember.js&lt;/small&gt;&lt;/h1&gt;
      {{/link-to}}
    &lt;/div&gt;
    &lt;div class=&quot;row&quot;&gt;
      {{outlet}}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;</code></pre>
</div>


<p>Next, the outlet in the <code>artists</code> template is populated by the routes below the
artists resource route:</p>

<div>
  <pre><code class='html'>&lt;script type=&quot;text/x-handlebars&quot; data-template-name=&quot;artists&quot;&gt;
  &lt;div class=&quot;col-md-4&quot;&gt;
    (list of artists)
  &lt;/div&gt;
  &lt;div class=&quot;col-md-8&quot;&gt;
    &lt;div class=&quot;list-group&quot;&gt;
      {{outlet}}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;</code></pre>
</div>


<p>The artist template also defines an outlet into which content is rendered by
the routes below the artist resource. In this case, there is no common markup
for a single artist so the template only defines the outlet:</p>

<div>
  <pre><code class='html'>&lt;script type=&quot;text/x-handlebars&quot; data-template-name=&quot;artist&quot;&gt;
  {{outlet}}
&lt;/script&gt;</code></pre>
</div>


<p>Finally, there is a single route defined below the <code>artist</code> resource, <code>artist.songs</code>:</p>

<div>
  <pre><code class='html'>&lt;script type=&quot;text/x-handlebars&quot; data-template-name=&quot;artist/songs&quot;&gt;
  (...)
  {{#each sortedSongs}}
    &lt;div class=&quot;list-group-item&quot;&gt;
      {{title}}
      {{star-rating ...}}
    &lt;/div&gt;
  {{/each}}
  (...)
&lt;/script&gt;</code></pre>
</div>


<h3>Loading routes build on the nested routes pattern</h3>

<p>The ingenious thing about indicating that loading data from the backend is
happening is that it leverages the &#8220;nested routes, nested templates&#8221;
architecture explained above.</p>

<p>When the model hook of a certain route returns a promise that is not resolved, a
so-called loading template <strong>at the same level as the route</strong> is going to be
rendered.</p>

<p>When loading the list of artists in the <code>artists</code> route, a loading route at the
same level is going to be activated. That, by default, means a top-level loading
template is rendered.</p>

<p>Consequently, all we need to do is to put into that template what we want the user to see
while data is being fetched. Currently that is what she sees in that scenario:</p>

<p><img src="/images/posts/loading-routes/top-level-loading-indication-before.png" alt="Loading indication before" /></p>

<p>You think we can beat that?</p>

<h3>Top-level loading template</h3>

<p>The convention says that the loading route (and thus template) should be the
sibling of the route we define it for and should be called <code>loading</code>.</p>

<p>The loading template for the <code>artists</code> route should consequently be called
<code>loading</code>:</p>

<div>
  <pre><code class='html'>&lt;script type=&quot;text/x-handlebars&quot; data-template-name=&quot;loading&quot;&gt;
  &lt;div class=&quot;loading-pane&quot;&gt;
    &lt;div class=&quot;loading-message&quot;&gt;
      Loading stuff, please have a cold beer.
      &lt;div class=&quot;spinner&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;</code></pre>
</div>


<p>Let&#8217;s inspect what our app looks like while loading data from the backend:</p>

<p><img src="/images/posts/loading-routes/top-level-loading-indication-after.png" alt="Loading indication before" /></p>

<p>Nice, but it gets nicer still.</p>

<h3>Loading route for the songs</h3>

<p>We can now descend a couple of levels and make a loading template for when the
songs of a certain artist are being fetched.</p>

<p>Let&#8217;s take a look at the &#8220;routing table&#8221; to see what that template should be
named:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">App</span><span class="p">.</span><span class="nx">Router</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s1">&#39;artists&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">resource</span><span class="p">(</span><span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;:slug&#39;</span> <span class="p">},</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;songs&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>The loading route should be the sibling of the route under consideration.</p>

<p>In this particular case, this latter is <code>artist.songs</code> and thus the loading
template should be named <code>artist.loading</code>:</p>

<div>
  <pre><code class='html'>&lt;script type=&quot;text/x-handlebars&quot; data-template-name=&quot;artist/loading&quot;&gt;
  &lt;div class=&quot;loading-pane&quot;&gt;
    &lt;div class=&quot;loading-message&quot;&gt;
      Loading the artist, please have an organic orange juice.
    &lt;/div&gt;
    &lt;div class=&quot;spinner&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;</code></pre>
</div>


<p><img src="/images/posts/loading-routes/artist-loading-indication.png" alt="Indicating loading artist" /></p>

<h3>Customizing loading route behavior</h3>

<p>More precisely, what happens when entering a route where one of the model hooks
returns an unresolved promise is that a <code>loading</code> event is fired on the
route.</p>

<p>We saw above that the default implementation is to look up a route at the same
level as the route itself and render the corresponding template.</p>

<p>However, this behavior is customizable. For example, we can pop up an alert box
in 1993-style, telling the user she needs to wait.</p>

<p>Below, I do that for the top-level <code>artists</code> route:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">App</span><span class="p">.</span><span class="nx">ArtistsRoute</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Route</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">model</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">someDataThatTakesTooLongToFetch</span><span class="p">();</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">(...)</span>
</span><span class='line'>  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">loading</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Loading data, go make some coffee.&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>It works:</p>

<p><img src="/images/posts/loading-routes/top-level-loading-with-alert.png" alt="1993-style loading indication" /></p>

<p>Another thing we can do is to render another loading template:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">App</span><span class="p">.</span><span class="nx">LoadingRoute</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Route</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">renderTemplate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;working&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>




<div>
  <pre><code class='html'>&lt;script type=&quot;text/x-handlebars&quot; data-template-name=&quot;working&quot;&gt;
  &lt;div class=&quot;loading-pane&quot;&gt;
    &lt;div class=&quot;loading-message&quot;&gt;
      I work hard while you play hard.
      &lt;div class=&quot;spinner&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;</code></pre>
</div>


<p>Which also just works:</p>

<p><img src="/images/posts/loading-routes/top-level-different-template.png" alt="Rendering a different template" /></p>

<p>Since handling the loading state happens in the route, the most powerful piece
of Ember architecture, the possibilities are many.</p>

<h3>Why I love this solution and why you should, too</h3>

<p>In summary, let&#8217;s see what Ember&#8217;s solution of indicating the loading of data
brings to the table:</p>

<ol>
<li>It uses a convention to eliminate boilerplate and spare you from having to
come up with your own solution.</li>
<li>It allows different markup and text for the different &#8220;slow&#8221; parts. By
default, each loading template will be rendered exactly where the data would
be rendered.</li>
<li>If this default behavior does not suit your taste or needs, there are several
ways to tweak it, in well-defined ways.</li>
</ol>


<p><em>Note: The latest version of the code that contains these changes is <a href="https://github.com/balinterdi/rock-and-roll/releases/tag/loading-routes">available on Github</a>.</em></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/06/04/replacing-items-in-browser-history-in-ember-dot-js.html">Replacing Items in Browser History in Ember.js</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-04T07:49:00+02:00" pubdate data-updated="true">Jun 4<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of the outstanding features of Ember.js is that all things related to URLs,
including going back and forth in browser history, just work. This is something
people got used to with &#8220;classical&#8221;, server-side applications and that several
other client-side frameworks lack.</p>

<p>In this post, I am going to focus on a browser history feature, replacing
entries in it as users navigate between routes instead of adding to it.</p>

<h3>Navigating between routes in Ember</h3>

<p>If either the <code>link-to</code> template helper or the route&#8217;s <code>transitionTo</code> method is
used to move between routes (and thus URLs), a new entry is going to be added to
the browser&#8217;s history. That is fine most of the time but sometimes the desired
behavior might be replacing the current entry.</p>

<p>Taking the example from the guide, if one is paging through the comments made on
a photo where each one has its own route, we probably do not want these comment
URLs to clutter the history. Similarly, we don&#8217;t want the user to land on these
URLs when she hits the Back button in the browser.</p>

<h3>Using the link-to helper</h3>

<p>All that needs to be done is adding the <code>replace=true</code> option to the <code>link-to</code> helper.</p>

<p>So if the link that takes you to the next comment is written like this:</p>

<div>
  <pre><code class='html'>{{link-to &#39;Next comment&#39; &#39;photo.comment&#39; nextComment}}</code></pre>
</div>


<p>It should now become:</p>

<div>
  <pre><code class='html'>{{link-to &#39;Next comment&#39; &#39;photo.comment&#39; nextComment replace=true}}</code></pre>
</div>


<h3>Transitioning from inside routes</h3>

<p>The canonical way to go from one route to another is <code>route.transitionTo</code>. If
flipping between comments of a photo was implemented as an action in the route,
the action handler would have the following line:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">this</span><span class="p">.</span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">&#39;photo.comment&#39;</span><span class="p">,</span> <span class="nx">nextComment</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>To make that replace the current history entry, this becomes:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">this</span><span class="p">.</span><span class="nx">replaceWith</span><span class="p">(</span><span class="s1">&#39;photo.comment&#39;</span><span class="p">,</span> <span class="nx">nextComment</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>replaceWith</code> takes the exact same parameters as <code>transitionTo</code>.</p>

<h3>In the controller</h3>

<p>As <a href="https://twitter.com/jacquescrocker">Jacques Crocker</a> points out <a href="http://balinterdi.com/2014/06/04/replacing-items-in-browser-history-in-ember-dot-js.html#comment-1452078154">in his comment</a>
below, I missed the case where we want to transition to another route, replacing
the current item in the history, from inside a controller.</p>

<p>Here is how to do that:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">this</span><span class="p">.</span><span class="nx">replaceRoute</span><span class="p">(</span><span class="s1">&#39;photo.comment&#39;</span><span class="p">,</span> <span class="nx">nextComment</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>So thank you, Jacques.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>My Ember 2 book</h1>
  <div>
    <a href="http://rockandrollwithemberjs.com/?utm_source=my-blog&utm_medium=sidebar&utm_campaign=rarwe-book" style="text-decoration:none">
      <img src="/images/rarwe-book.jpg" alt="Rock and Roll with Ember.js" title="Rock and Roll with Ember.js" />
    </a>
  </div>
</section>
<section>
  <h1>Contact</h1>
  <div style="margin-top:10px">
    I do Ember.js consulting. If you have a project that needs help, <a href="mailto:balint@balinterdi.com">contact me</a> and let&#8217;s start talking.
  </div>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2016/08/24/rock-and-roll-with-ember-dot-js-2-dot-7-is-released.html">Rock and Roll with Ember.js 2.7 is released</a>
      </li>
    
      <li class="post">
        <a href="/2016/08/11/using-dependency-injection-to-write-better-tests.html">Using Dependency Injection to Write Better Tests</a>
      </li>
    
      <li class="post">
        <a href="/2016/07/07/rock-and-roll-with-ember-dot-js-2-dot-6-is-released.html">Rock and Roll with Ember.js 2.6 is released</a>
      </li>
    
      <li class="post">
        <a href="/2016/05/26/complex-component-design-in-ember-part-4-use-the-hash-helper.html">Complex Component Design in Ember - Part 4 - Use the hash helper</a>
      </li>
    
      <li class="post">
        <a href="/2016/05/03/rock-and-roll-with-ember-dot-js-2-dot-5-is-released.html">Rock and Roll with Ember.js 2.5 is released</a>
      </li>
    
  </ul>
</section>
<section class="codementor">
  <script data-codementor="balint" data-style="button" data-theme="dark" src="https://cdn.codementor.io/d/badge.js"></script>
</section>


<section>
  
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/baaz" class="twitter-follow-button" data-show-count="false">Follow @baaz</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Balint Erdi -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'codigoergosum';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script src="/javascripts/app.js"></script>




</body>
</html>
